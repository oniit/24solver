<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clue Solver</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Clue Solver</h1>
    </header>
    <main>
        <p>Input clue:</p>
        <form id="clueForm">
            <div class="clue">
                <label for="clue1">Dua angka benar di posisi benar:</label>
                <input type="number" id="clue1-1" min="0" max="9" required>
                <input type="number" id="clue1-2" min="0" max="9" required>
                <input type="number" id="clue1-3" min="0" max="9" required>
                <input type="number" id="clue1-4" min="0" max="9" required>
            </div>
            <div class="clue">
                <label for="clue2">Satu angka benar di posisi benar:</label>
                <input type="number" id="clue2-1" min="0" max="9" required>
                <input type="number" id="clue2-2" min="0" max="9" required>
                <input type="number" id="clue2-3" min="0" max="9" required>
                <input type="number" id="clue2-4" min="0" max="9" required>
            </div>
            <div class="clue">
                <label for="clue3">Dua angka benar di posisi salah:</label>
                <input type="number" id="clue3-1" min="0" max="9" required>
                <input type="number" id="clue3-2" min="0" max="9" required>
                <input type="number" id="clue3-3" min="0" max="9" required>
                <input type="number" id="clue3-4" min="0" max="9" required>
            </div>
            <div class="clue">
                <label for="clue4">Satu angka benar di posisi salah:</label>
                <input type="number" id="clue4-1" min="0" max="9" required>
                <input type="number" id="clue4-2" min="0" max="9" required>
                <input type="number" id="clue4-3" min="0" max="9" required>
                <input type="number" id="clue4-4" min="0" max="9" required>
            </div>
            <div class="clue">
                <label for="clue5">Tidak ada angka yang benar:</label>
                <input type="number" id="clue5-1" min="0" max="9" required>
                <input type="number" id="clue5-2" min="0" max="9" required>
                <input type="number" id="clue5-3" min="0" max="9" required>
                <input type="number" id="clue5-4" min="0" max="9" required>
            </div>
            <br>
            <div class="button-wrapper">
                <a href="index.html" class="back-btn">Back</a>
                <button type="button" class="solve-btn" onclick="solveClue()">Solve</button>
            </div>
        </form>
        <div id="result"></div>
    </main>
    <script>
        function checkClue(guess, clue) {
            const [numbers, clueType] = clue;
            if (clueType === "0 benar") {
                return guess.every(num => !numbers.includes(num));
            } else if (clueType === "2 benar") {
                return guess.filter((num, i) => num === numbers[i]).length === 2;
            } else if (clueType === "1 benar") {
                return guess.filter((num, i) => num === numbers[i]).length === 1;
            } else if (clueType === "2 salah") {
                return guess.filter((num, i) => numbers.includes(num) && num !== numbers[i]).length === 2;
            } else if (clueType === "1 salah") {
                return guess.filter((num, i) => numbers.includes(num) && num !== numbers[i]).length === 1;
            }
            return false;
        }

        function solveClue() {
            const clues = [];
            for (let i = 1; i <= 5; i++) {
                const clueNumbers = [
                    parseInt(document.getElementById(`clue${i}-1`).value, 10),
                    parseInt(document.getElementById(`clue${i}-2`).value, 10),
                    parseInt(document.getElementById(`clue${i}-3`).value, 10),
                    parseInt(document.getElementById(`clue${i}-4`).value, 10)
                ];
                const clueType = document.querySelector(`#clueForm .clue:nth-child(${i}) label`).textContent.split(" ")[0];
                clues.push([clueNumbers, clueType]);
            }

            const permutations = (arr, size) => {
                if (size === 1) return arr.map(el => [el]);
                const result = [];
                arr.forEach((el, i) => {
                    const rest = [...arr.slice(0, i), ...arr.slice(i + 1)];
                    permutations(rest, size - 1).forEach(perm => result.push([el, ...perm]));
                });
                return result;
            };

            const allPermutations = permutations([...Array(10).keys()], 4);
            const solutions = allPermutations.filter(perm =>
                clues.every(clue => checkClue(perm, clue))
            );

            const resultContainer = document.getElementById("result");
            resultContainer.innerHTML = solutions.length
                ? `Solution found: ${solutions[0].join(", ")}`
                : "No solution found.";
        }
    </script>
</body>
</html>